:root{
  --bg:#07080f; --panel:#0b0f1f; --muted:#aab1da; --text:#eef0ff; --accent:#8bd7ff; --danger:#ff6b6b; --good:#6bff95;
  --radius:16px; --border:1px solid #262c5a; --shadow:0 10px 30px rgba(0,0,0,.45);
}

/* Page background (black glass theme) */
*{box-sizing:border-box}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
  min-height:100svh;
  background: radial-gradient(1200px 800px at 10% 10%, #0b0f22, #050611);
}

#classList.locked .class-card{ opacity:.55; pointer-events:none; filter:grayscale(.15) }
#classList.locked .class-card:hover{ box-shadow:none }

.wrap{max-width:1100px; margin:0 auto; padding:22px; display:grid; gap:16px}
h1{margin:.2rem auto .4rem; text-align:center; letter-spacing:.5px; font-weight:800; opacity:.98}

.grid{display:grid; gap:14px}
@media(min-width:980px){.grid{grid-template-columns:340px 1fr}}

.panel{
  background:rgba(10,14,34,.66);
  border:1px solid rgba(120,140,255,.12);
  border-radius:var(--radius);
  box-shadow:var(--shadow), inset 0 1px 0 rgba(255,255,255,.06);
  padding:14px;
  backdrop-filter: blur(8px) saturate(120%);
}
.row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

button{
  appearance:none; border:0; background:linear-gradient(180deg,#2b337a,#1e265f);
  color:#e7ecff; padding:10px 14px; border-radius:999px; cursor:pointer; box-shadow:var(--shadow);
  transition:transform .06s ease, filter .15s, box-shadow .2s;
}
button:hover{filter:brightness(1.07)}
button:active{transform:translateY(1px) scale(.99)}
button[disabled]{opacity:.5; cursor:not-allowed}

.classes{display:grid; grid-template-columns:repeat(2, minmax(150px,1fr)); gap:10px}
.class-card{
  background:rgba(11,15,40,.7); border:1px solid rgba(120,140,255,.15);
  border-radius:12px; padding:10px; cursor:pointer;
  transition:box-shadow .2s, transform .1s;
}
.class-card:hover{ box-shadow:0 0 0 2px rgba(139,215,255,.25) }
.class-card.selected{outline:3px solid var(--accent)}
.class-title{font-weight:700; display:flex; align-items:center; gap:8px}
.stats{display:grid; grid-template-columns:repeat(2,1fr); gap:6px; font-size:.92rem; color:var(--muted)}

.bar{height:14px; background:#0c1030; border:1px solid #232a5c; border-radius:999px; overflow:hidden}
.bar>span{display:block; height:100%}
.hp>span{background:linear-gradient(90deg,#3ee38d,#18a35f)}
.mp>span{background:linear-gradient(90deg,#6fb6ff,#4b7fff)}

.battle{display:grid; gap:12px; position:relative}
.combatants{display:grid; grid-template-columns:1fr; gap:12px}
@media(min-width:760px){.combatants{grid-template-columns:1fr 1fr}}

.card{
  background:rgba(11,15,40,.7); border:1px solid rgba(120,140,255,.15);
  border-radius:12px; padding:12px; transition:box-shadow .2s, transform .18s;
}
.name{display:flex; justify-content:space-between; align-items:center}
.big{font-size:1.1rem; font-weight:700}
.log{min-height:140px; max-height:260px; overflow:auto; background:rgba(9,12,32,.9); border:var(--border); border-radius:12px; padding:10px}
.log p{margin:.25rem 0}
.footer{display:flex; justify-content:space-between; align-items:center; gap:8px}
.tag{background:rgba(12,16,40,.9); color:#aab1da; border:var(--border); padding:4px 8px; border-radius:999px}
.boss-num{font-weight:700}

.boss-art, .hero-art{
  width:100%; aspect-ratio:4/5; background:#090d28 center/cover no-repeat;
  border:var(--border); border-radius:12px; box-shadow:var(--shadow); margin:8px 0
}
.boss-art[hidden], .hero-art[hidden]{display:none}

/* Roster */
.roster{list-style:none; padding:0; margin:0; display:grid; gap:6px}
.roster li{display:flex; align-items:center; gap:8px; background:rgba(11,15,40,.7); border:1px solid rgba(120,140,255,.15);
  border-radius:10px; padding:6px 8px; color:#aab1da; cursor:pointer}
.roster li .num{width:22px; text-align:center; font-weight:700; color:#c8cdf7}
.roster li .name{flex:1; color:#e7eaff}
.roster li.active{outline:2px solid var(--accent)}
.roster li.defeated{opacity:.6}
.roster .thumb{width:28px; height:28px; border-radius:6px; background:#0b0f2b center/cover no-repeat; border:1px solid #232a5c}

/* Icons */
.hero-icon{width:28px; height:28px; border-radius:6px; background:#0b0f2b center/cover no-repeat; border:1px solid #232a5c}
.hero-icon.big-hero{width:32px; height:32px; border-radius:8px}
.btn-icon{width:18px; height:18px; display:inline-block; background:center/cover no-repeat; vertical-align:middle; margin-right:6px; border-radius:4px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08)}

/* Perks */
.perk-panel{ margin-top:10px; padding:12px; border:var(--border); border-radius:12px; background:rgba(9,12,32,.9) }
.perk-title{ margin:0 0 8px; color:#ffd }
.perk-choices{ display:flex; flex-wrap:wrap; gap:10px }
.perk-btn{ background:linear-gradient(180deg,#3540a5,#2a3170); padding:10px 12px; border-radius:10px; border:0; color:#e7ecff; cursor:pointer }
.perk-btn:disabled{ opacity:.5; cursor:not-allowed }

/* FX */
.hit-flash{ position:absolute; inset:0; pointer-events:none; background:radial-gradient(ellipse at 50% 50%, rgba(255,255,255,.6), rgba(255,255,255,0) 60%); opacity:0 }
.hit-flash.show{ animation:flash .14s ease }
@keyframes flash{ from{opacity:.75} to{opacity:0} }

.shake{ animation:shake .18s linear }
@keyframes shake{ 0%{transform:translateX(0)} 20%{transform:translateX(6px)} 40%{-webkit-transform:translateX(-6px); transform:translateX(-6px)} 60%{transform:translateX(4px)} 80%{transform:translateX(-4px)} 100%{transform:translateX(0)} }
.pulse{ animation:pulse .18s ease }
@keyframes pulse{ 0%{transform:scale(1)} 50%{transform:scale(.985)} 100%{transform:scale(1)} }

.low-hp{ box-shadow:0 0 0 2px #ff4d4d, 0 0 20px 2px #ff4d4d99; animation:lowhp 1.2s ease-in-out infinite }
@keyframes lowhp{ 0%{box-shadow:0 0 0 2px #ff4d4d,0 0 14px 0 #ff4d4d66} 50%{box-shadow:0 0 0 2px #ff7171,0 0 26px 4px #ff4d4daa} 100%{box-shadow:0 0 0 2px #ff4d4d,0 0 14px 0 #ff4d4d66} }

/* Victory overlay */
.overlay{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(4,6,18,.75); backdrop-filter:blur(4px); z-index:999; animation:fadeIn .2s ease }
.overlay[hidden]{display:none}
.overlay-box{ position:relative; width:min(620px,92vw); background:linear-gradient(180deg,#1a2152,#0f1436); border:1px solid rgba(140,160,255,.18); border-radius:18px; padding:22px; box-shadow:0 20px 60px rgba(0,0,0,.55); color:#e9ecff; text-align:center }
.overlay-box h2{ margin:0 0 8px }
.overlay-actions{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px }
.confetti{ position:absolute; inset:0; overflow:hidden; pointer-events:none }
.confetti i{ position:absolute; top:-10px; width:8px; height:14px; background:hsl(var(--h) 90% 60%); transform:rotate(0); animation:confetti 2.5s linear infinite; opacity:.9 }
@keyframes confetti{ 0%{transform:translateY(-10px) rotate(0)} 100%{transform:translateY(105vh) rotate(720deg)} }
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
